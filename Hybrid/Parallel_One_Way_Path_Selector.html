<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Parallel Path Selector</title>
  <link rel="stylesheet" href="/Redstone-CG-Documentation/styles.css">
</head>
<body>
  <header>
    <h1>Parallel Path Selector</h1>
  </header>

  <div class="block_table">
    <table>
      <th>Parallel Path Selector</th>
      <tr>
        <td>
          <div id="bt-dsp" class="block_table-dsp">
            <div id="bt-rnd"><div id="rnd"></div></div>
            <div id="bt-btz" style="display: none;"><div id="btz"></div></div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <button id="bt-btn-bl" class="bt-button active">BL</button>
            <button id="bt-btn-br" class="bt-button">BR</button>
            <button id="bt-btn-lb" class="bt-button">LB</button>
            <button id="bt-btn-rb" class="bt-button">RB</button>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <button id="bt-redirect-A" class="bt-button active">Direct To A</button>
            <button id="bt-redirect-B" class="bt-button">Direct To B</button>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <button id="bt-signal-low" class="bt-button active">Set Signal Low</button>
            <button id="bt-signal-high" class="bt-button">Set Signal High</button>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <div>Stackable</div><div>Yes(64)</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <div><a href="https://minecraft.wiki/w/Explosion#Blast_resistance">Blast Resistance</a></div><div>10</div>
          </div>
        </td>
      </tr>
      <tr>
        <td>
          <div>
            <div><a href="https://minecraft.wiki/w/Breaking#Blocks_by_hardness">Hardness</a></div><div>1</div>
          </div>
        </td>
      </tr>
    </table>
  </div>

  <main>
    <section id="overview">
      <h2>Overview</h2>
      <p>
        The <strong>Parallel Path Selector</strong> is an
        <a href="/Redstone-CG-Documentation/Analog_Gates.html">Analog Block</a> that selects a path for an incoming signal,
        based on the <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gate Line Signal</a>.
      </p>
      <p>
        (Small Recap from <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gates</a>)
        The <strong><a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gate Line Signal</a></strong> is a signal applied at the either end of a
        <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gate Line</a> and is used by all
        <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gates</a> in the line.
      </p>
      <p>
        Based on this signal, the Parallel Path Selector determines whether to pass the input signal at the Front
        to the output signal at the Back, or redirect it to the next
        <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Path Selector</a> on the Left or Right in the
        <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gate Line</a>.
      </p>
      <p>
        When the <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gate Line Signal</a> is low (0), the signal
        from the Front is sent to <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Mark A</a>. The signal for
        <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Mark B</a> is then provided by an Alternate Input read from the
        Parallel Path Selector on the Left side, if any of the
        <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Marks</a> are on the Right side. If any of the
        <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Marks</a> are on the Left side, the signal is instead provided from the
        Parallel Path Selector on the Right side.
      </p>
      <p>
        When the <a href="/Redstone-CG-Documentation/Parallel_Gates.html">Parallel Gate Line Signal</a> is high (&gt;0), the signal
        from the Front is sent to <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Mark B</a>. The signal for
        <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Mark A</a> is then provided by an Alternate Input read from the
        Parallel Path Selector on the Left side, if any of the
        <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Marks</a> are on the Right side. If any of the
        <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Marks</a> are on the Left side, the signal is instead provided from the
        Parallel Path Selector on the Right side.
      </p>
      <p>
        This behavior allows for controlled signal shifting, enabling players to construct Shift Registers.
      </p>
      <div class="image800">
        <img alt="Parallel Path Selector Example" src="/Redstone-CG-Documentation/media/images/Parallel_Path_Selector_Example.png"/>
      </div>
    </section>

    <section id="configuration">
      <h2>Configuration</h2>
      <ul>
        <li>
          By right-clicking the gate, you can configure the outputs and alternate input.
        </li>
        <li>
          Either <strong><a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Mark A</a></strong> or <strong><a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Mark B</a></strong> will always face the Front of the gate, while the other pin mark will face the Left or Right.
        </li>
        <li>
          The Alternate Input will be on the side opposite to the non-front <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Mark</a>.
        </li>
      </ul>
    </section>

    <section id="obtaining">
      <h2>Crafting</h2>
      <div class="recipe_table">
        <table>
          <tr>
            <td><b>Ingredients</b></td>
            <td><b><a href="/Redstone-CG-Documentation/RedCu_Crafter.html">RedCu Crafter</a> Recipe</b></td>
          </tr>
          <tr>
            <td>
              1 <a href="/Redstone-CG-Documentation/Smooth_Stone_Plate.html">Smooth Stone Plate</a>
            </td>
            <td rowspan="3" width="400px">
              <div class="table-place" id="Parallel-Making"></div>
            </td>
          </tr>
          <tr>
            <td>
              1 <a href="https://minecraft.wiki/w/Redstone_Dust">Redstone Dust</a>
            </td>
          </tr>
          <tr>
            <td>
              1 <a href="https://minecraft.wiki/w/Nether_Quartz">Quartz</a>
            </td>
          </tr>
        </table>
      </div>
    </section>
    <section id="version_log">
      <h2><a href="/Redstone-CG-Documentation/Version_Log.html">Version Log</a></h2>
      <div class="version_table">
        <table>
          <tr><td>Version</td><td>Description</td></tr>
          <tr><td>0.1.0</td><td>Introduced. Block first reads the blockstate on the input, and if suitable, uses blockstate value, if not, reads redstone signal. Updates neighbours when output changes.</td></tr>
          <tr><td>0.1.1</td><td>Changed registry name from <code>parallel_path_selector</code> to <code>floor_parallel_one_way_path_selector</code>. Replaced bottom texture from being that on the top to <a href="https://minecraft.wiki/w/Smooth_Stone">Smooth Stone Block</a>.</td></tr>
          <tr><td>0.2.0</td><td>Changed registry name from <code>floor_parallel_one_way_path_selector</code> to <code>parallel_one_way_path_selector</code>. Can be placed on walls and ceiling. Updates the block on the output when output changes instead of updating all neighbours. Data from the input on the back is stored on Block Entity. Lost `rotate` and `mirror` block methods..</td></tr>
          <tr><td>0.2.1</td><td>Reimplemented `rotate` block method. Reclassified as Hybrid Gate.</td></tr>
        </table>
      </div>
    </section>
  </main>

  <footer class="nav-links">
    <a href="/Redstone-CG-Documentation/index.html">Welcome Page</a>
    <a href="/Redstone-CG-Documentation/Getting_Started.html">Getting Started</a>
    <a href="/Redstone-CG-Documentation/List_of_Elements.html">List of Elements</a>
    <a href="/Redstone-CG-Documentation/Pin_Marks.html">Pin Marks</a>
    <a href="/Redstone-CG-Documentation/Known_Bugs.html">Known Bugs</a>
    <a href="/Redstone-CG-Documentation/Version_Log.html">Version Log</a>
  </footer>
  <script src="/Redstone-CG-Documentation/script.js"></script>
  <script>
    // JavaScript to compose the views in the display area
    const gate = "components/hybrid/parallel_path_selector";
    const rccr1array = [
      { slot: 0, img: "/Redstone-CG-Documentation/media/items/smooth_stone_plate.png" },
      { slot: 1, img: "https://minecraft.wiki/images/Redstone_Dust_JE2_BE2.png?8cf17" },
      { slot: 2, img: "https://minecraft.wiki/images/Nether_Quartz_JE2_BE2.png?d0049" },
      { slot: 3, img: `/Redstone-CG-Documentation/media/textures/${gate}.png` },
      { slot: 4, img: `/Redstone-CG-Documentation/media/textures/${gate}.png` }
    ];

    // Populate the recipe view (same as for the Forward Path Selector)
    populateRedCuCrafter("Parallel-Making", { category: 2, tipe: 1 }, rccr1array);
    window.addEventListener("resize", () => {
      populateRedCuCrafter("Parallel-Making", { category: 2, tipe: 1 }, rccr1array);
    });

    // Setup button arrays for switching pin configurations and state
    const buttonArray = [
      { buttonId: 'bt-btn-bl', pinMark: ["b", "l_alt"] },
      { buttonId: 'bt-btn-br', pinMark: ["b", "r_alt"] },
      { buttonId: 'bt-btn-lb', pinMark: ["l", "b_alt"] },
      { buttonId: 'bt-btn-rb', pinMark: ["r", "b_alt"] }
    ];

    const stateButtonArray = [
      { buttonId: 'bt-redirect-A', directed: "a" },
      { buttonId: 'bt-redirect-B', directed: "b" },
      { buttonId: "bt-signal-low", powered: "off" },
      { buttonId: "bt-signal-high", powered: "on" },
    ];

    let actvind = 0;
    let powered = "off";
    let directed = "a";

    document.addEventListener("DOMContentLoaded", function () {
      // Set up the main button div switcher for the configuration buttons.
      setupButtonDivSwitcher(buttonArray.map(({ buttonId, pinMark }, index) => ({
        buttonId,
        functionCall: () => {
          renderComponent("rnd", `${gate}/${powered}_${directed}.png`, pinMark, []);
          blitzComponent("btz", `${gate}/${powered}_${directed}.png`, pinMark, []);
          actvind = index;
        }
      })), "bt-rnd", "bt-btz", "bt-dsp");

      // Set up state change buttons
      stateButtonArray.forEach(entry => {
        const elm = document.getElementById(entry.buttonId);
        if ("directed" in entry) {
          elm.onclick = function () {
            directed = entry.directed;
            renderComponent("rnd", `${gate}/${powered}_${directed}.png`, buttonArray[actvind].pinMark, []);
            blitzComponent("btz", `${gate}/${powered}_${directed}.png`, buttonArray[actvind].pinMark, []);
            stateButtonArray.forEach(oentry => { 
              if ("directed" in oentry) { 
                document.getElementById(oentry.buttonId).classList.remove("active"); 
              } 
            });
            elm.classList.add("active");
          };
        }
        if ("powered" in entry) {
          elm.onclick = function () {
            powered = entry.powered;
            renderComponent("rnd", `${gate}/${powered}_${directed}.png`, buttonArray[actvind].pinMark, []);
            blitzComponent("btz", `${gate}/${powered}_${directed}.png`, buttonArray[actvind].pinMark, []);
            stateButtonArray.forEach(oentry => { 
              if ("powered" in oentry) { 
                document.getElementById(oentry.buttonId).classList.remove("active"); 
              } 
            });
            elm.classList.add("active");
          };
        }
      });
    });
  </script>
</body>
</html>
